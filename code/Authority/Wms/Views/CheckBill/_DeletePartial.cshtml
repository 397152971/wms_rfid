<script type="text/javascript">
function deleteClick() {
    var row = $('#details').datagrid('getSelected');
    if (row) {
        $.messager.confirm('删除', '是否确认要删除?', function (r) {
            if (r) {
                $.getJSON('/CheckBill/Delete/', { BillNo: row.BillNo }, function (json) {
                    if (json) {
                        if (json.success) {
                            $.messager.show({
                                title: '成功',
                                msg: json.msg
                            });
                            $('#details').datagrid('load');
                            $('#checkBillDetails').datagrid('loadData', { total: 0, rows: [] }); //清空细单
                        } else {
                            $.messager.show({
                                title: '错误',
                                msg: json.msg
                            });
                            $('#details').datagrid('load');
                        }
                    }
                });
            }
        });
    } else {
        $.messager.confirm('错误', '没有选择行！');
    }
};
</script>
