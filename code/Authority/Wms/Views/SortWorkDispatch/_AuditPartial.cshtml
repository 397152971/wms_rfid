<script type="text/javascript">
    function auditClick() {
        var row = $('#details').datagrid('getSelected');
        if (row) {
            if (row.DispatchStatus != "已调度") {
                $.messager.confirm('错误', '该记录状态不是已调度状态无法审核！');
            } else {
                $.messager.confirm('审核', '确认要审核该记录吗？', function (r) {
                    if (r) {
                        $.getJSON('/SortWorkDispatch/Audit/', { id: row.ID }, function (json) {
                            if (json) {
                                if (json.success) {
                                    $.messager.show({
                                        title: '成功',
                                        msg: json.msg
                                    });
                                    $('#details').datagrid('load');
                                } else {
                                    $.messager.show({
                                        title: '错误',
                                        msg: json.msg
                                    });
                                    $('#details').datagrid('load');
                                }
                            }
                        });
                    }
                });
            }
        } else {
            $.messager.confirm('错误', '没有选择行，无法审核！');
        }
    }
</script>

