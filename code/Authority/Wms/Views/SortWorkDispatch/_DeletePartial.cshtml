<script type="text/javascript">
function deleteClick() {
    var row = $('#details').datagrid('getSelected');
    if (row) {
        $.messager.confirm('删除', '删除本记录，将删除已生成的出库单和移库单，确认要删除这条记录吗？', function (r) {
            if (r) {
                $.getJSON('/SortWorkDispatch/Delete/', { id: row.ID }, function (json) {
                    if (json) {
                        if (json.success) {
                            $.messager.show({
                                title: '成功',
                                msg: json.msg
                            });
                            $('#details').datagrid('load');
                        } else {
                            $.messager.show({
                                title: '错误',
                                msg: json.msg
                            });
                            $('#details').datagrid('load');
                        }
                    }
                });
            }
        });
    } else {
        $.messager.confirm('错误', '没有选择行！');
    }
}
</script>
