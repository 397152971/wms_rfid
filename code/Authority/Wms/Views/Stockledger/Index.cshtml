<script type="text/javascript">
    function formatAction(value, row, index) {
        var e = '<a href="#" onclick="detail( '+index+')">查询明细</a> ';
        return e
    }

    function Quantity(value, row) {
        if (value != 0) {
            return '<span style="color:red;">' + value + '</span>';
        } else {
            return value;
        }
    }

    function detail(index) {
        var row = $('#details').datagrid('getSelected');
        if (row) {
            $('#infos').datagrid({ url: '/Stockledger/InfoDetails/?WarehouseCode=' + row.WarehouseCode + '&&ProductCode=' + row.ProductCode + '&&SettleDate=' + row.SettleDate });
            $('#InfoDetails').dialog('open').dialog('setTitle', '进出损益明细');
        }
    }
</script>

<div region="center" split="true" border="false" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #99BBE8">  
    <table id="details" class="easyui-datagrid" pageSize="50"
        url="/Stockledger/Details/" border="false" singleSelect="true"
        fit="true" fitColumns="true" toolbar="#tool"  pagination="true" rownumbers="true">
        <thead>
            <tr>
                <th field="SettleDate" width="80">
                    日期
                </th>
                <th field="WarehouseName" width="80">
                    仓库名称
                </th>
                <th field="ProductCode" width="80">
                    商品代码
                </th>
                <th field="ProductName" width="120">
                    商品名称
                </th>
                <th field="UnitName" width="80">
                    单位
                </th>
                <th field="Beginning" width="70">
                    期初量
                </th>
                <th field="EntryAmount" width="70">
                    入库量
                </th>
                <th field="DeliveryAmount" width="70">
                    出库量
                </th>
                <th field="ProfitAmount" width="70">
                    报损量
                </th>
                <th field="LossAmount" width="70">
                    报益量
                </th>
                <th field="Ending" width="70">
                    结余量
                </th>
                <th  id="detailformatAction" field="detail" width="80" align="center" formatter="formatAction">库存明细</th>
            </tr>
        </thead>
    </table>
</div>
@Html.Partial("_Detail")


 